{"version":3,"sources":["js/booking/bookForm.js","js/booking/validation.js","js/booking/sendBooking.js","js/booking/book.js"],"names":["availableDates","dateInput","document","querySelector","minDate","Date","now","maxDate","min","toISOString","split","max","availableTimes","event","timeInput","hours","target","validity","valid","dayOfWeek","dayofWeek","dayoffWeek","selectBtns","selectBtn","input","value","restaurantBtns","querySelectorAll","partyBtns","timeBtns","forEach","btn","addEventListener","dataset","bookForm","inputs","errorBoxes","checkError","error","index","classList","add","scrollIntoView","removeError","oninput","remove","setParams","form","name","elements","email","restaurant","date","time","party","message","sendBooking","method","url","params","Promise","resolve","reject","xhr","XMLHttpRequest","open","setRequestHeader","onload","status","JSON","parse","responseText","_id","id","onerror","send","submitBooking","bookBtn","e","preventDefault","disabled","then","reply","innerHTML","catch"],"mappings":";;AGAA;;AACA;;AAEA,AFHA,IAAMmC,MAAM,GAAGjC,QAAQ,CAACyB,gBAAT,CAA0B,OAA1B,CAAf;AEIA,ADJA,ADCA,IAAMS,UAAU,GAAGlC,QAAQ,CAACyB,CEI5B,eFJmB,CAA0B,QAA1B,CAAnB;;AEKAzB,AHNA,AEEA,ADCO,IDHDF,AEEA8C,ADCOT,IEGL,CAAClC,IDJM,CDCQ,ECDL,CDCQ,CDHN,GAAG,CGMvB,CAAuB,EDJjB2C,CDCOT,IDHPrC,IGMN,ADJkB,ECIkBgC,AFHV,CCDF,EDCQ,KDHT,GAAM,KGM7B,CAAqD,QAArD,EAA+D,gCAAc,MAAd,EAAsB,qBAAtB,CAA/D;AHLI,AEEF,ADCE,MDHM/B,AEEF8C,ADCAT,ICDI,CDCC,ECDEpC,CDCC,CDHG,GAAGA,CCGlB,ECDmB,CAACC,IFFM,CAACA,QEEhB,CAAuB,IFFhB,CAAuB,MEE9B,CFFO,AEEpB,CFFE;AACA,AEEF,ADCEgC,EAAAA,IDHM/B,AEEF4C,EDCE,CAAClB,CCDC,GFFK,AEEFiB,GFFK,ACGhB,CCDe,ADCC,CCDAE,EFFI5C,IAAJ,CAASA,CEEd,CAAc,ADCRmB,EDHY,CAAClB,ECGd,CDHS,AEEd,CDCaiC,CCDSd,GFFK,CCGtB,CCDlB,CDCoC,KDHlB,CAAhB;AACA,AEEF,ADCI,MDHIlB,AEEF2C,EDCE,CAAC1B,ECDE,EFFI,CEEDuB,ADCA,CAAC9B,CDHG,EEEA,CAACgC,CFFG5C,GCGb,CDHS,ACGMa,CDHGb,EEEb,CAAc,CFFG,ACG3B,CDH4BC,CCGD,EDHJ,EEEb,EAAuBmB,CFFG,IEExC,MFFkB,CAAhB;AACAxB,AEEF,ADCMqC,EDHJrC,IEEIkD,ADCAb,KDHK,ACGA,CDHC9B,ECGE,CDHZ,CEEc,EFFEJ,ACGZ,CCDa2C,IAAI,CAACE,CFFC,CAACxC,MEEP,CAAc,IFFf,GAAsBC,KAAtB,AEEC,CFF2B,CEECe,EFF7B,EAAiC,CAAjC,AEElB,CFFE;AACAxB,AEEF,ADCMmC,EDHJnC,IEEImD,ADCAhB,ICDI,CFFC,CAACzB,CEECoC,EFFX,CCGc,CCDC,ADCAR,CDHChC,AEEA0C,IDCF,CAAV,CAAkBT,CDHC,CAAC/B,AEEb,CAAc,MAAd,ADCP,CAA4BgC,CCDChB,EFFjB,ACGZ,CAAgC,EDHEf,AEExC,KFFkB,CAA4B,GAA5B,EAAiC,ACG7C,CDHY,CAAhB;AAAoD,AEGtD,ADCMyB,MCDAkB,ADCAlB,ICDI,EDCE,CCDCY,ADCAR,ICDI,CAACU,ADCN,CAAN,CAAcT,MCDP,CAAc,EDCrB,CAAwBC,GCDjB,ADCP,CAA4B,CCDChB,KAAnC,QDCM;ADHP,AEGC,ADCMU,CDVR,KESQmB,ADCAnB,KCDK,CDCC,CAACI,CCDCQ,IAAI,ADCN,CCDOE,ADCb,CAAcP,OCDN,CAAc,MDCtB,CCDQ,EAAuBjB,KAArC;AACA,ADCMkB,MCDAY,ADCAZ,OCDO,GAAGI,CDCC,CAACR,ECDE,CAACU,EDCJ,CAAX,KCDU,CAAc,SAAd,EAAyBxB,KAAzC;AFFF,AEGE,ADCK,IDJDb,cAAc,GAAG,GEGNoC,IAAf,EFHIpC,cAAiB,CAACC,GEGOqC,EFHR,EAAW,CEGhC,yBAAiDC,UAAjD,mBAAoEC,IAApE,mBAAiFC,IAAjF,oBAA+FC,KAA/F,sBAAgHC,OAAhH;AFFE,AEGH,ADCI,CCXL,EDGI,GDIMzC,SAAS,GAAGZ,QAAQ,CAACC,aAAT,CAAuB,OAAvB,CAAlB;ACKA,SAAOmC,KAAP;ADJA,AEIJ,ADCC,CAZM,GCWDkB,EFJIzC,KAAK,IEIE,GAAG,SAAdyC,WAAc,CAACC,MAAD,EAASC,GAAT,EAAiB;AFH/B,AEIJ,MAAMC,KFJK,CAAC,AEIA,GAAGb,IFJJ,EAAU,GEIG,EAAxB,EFJW,CADE;AAET,AEIJ,SAAO,GFJK,CAAC,AEIFc,OFJC,AEIL,CAAa,CFJE,OAAV,CAFC,CEMQC,OAAD,EAAUC,MAAV,EAAqB;AFHrC,AEIF,QAAMC,GFJG,AEIA,CFJC,EEIE,IAAIC,CFJP,EAAU,OAAV,CAHE,GEOC,EAAZ;AFHE,AEIFD,ADDK,ICCLA,ADDWpB,GCCR,CAACsB,IAAJ,CFJW,AEIFR,CFJG,CCGU,GAAG,CCCzB,EFJW,AEIMC,EFJI,CEIrB,EAAsB,CDDXf,GDHA,AEIX,CFRW,OCOc,CAACJ,KAAD,EAAW;ADFlC,AEIFwB,ADDA5B,EAAAA,ECCA4B,GAAG,CAACG,ADDE,CAAC3B,EDHE,CAAC,ECGJ,CAAN,CAAcK,GDHL,EAAU,ECGnB,CCCA,CAAqB,CDDG,EDHf,CALE,SCQmB,CCC9B,EAAqC,mCAArC;AFHE,ACGA,QAAIT,GDHG,CAAC,ECGE,CAACI,IDHJ,CCGG,CDHO,ACGb,CAActB,MDHX,ECGH,CAAuBC,KAA3B,EAAkC;ADTzB,AEUX6C,ADAK5B,ICAL4B,EDAK5B,CCAF,CAACgC,IFHK,ACGE,CDHD,ACGE5B,CCAZ,GAAa,CDAF,CAAN,CDHI,ACGUC,EDHA,OAAV,AEGc,ADAlB,CDVM,ACUkBK,CDV7B,KCUK,CAA+B,cAA/B;ACCH,ADAET,MAAAA,ICAE,KAAKgC,CDAG,CAAC7B,ICAT,CDAQ,CAAV,CAAkBC,ECAA,GAApB,EAAyB,EDAvB,CAA4BK,MAA5B,CAAmC,aAAnC;ADFJ,AEE2B,ADCxB,MDHChC,KAAK,CAACG,MAAN,CAAaC,OEGCoD,CFHd,CAAsBnD,EEGJ,CAACoD,EFHvB,EAAiC,CEGf,CAAW,KAAKC,YAAhB,CADS;AFDvB,AECuB,ADE1B,GALD,KDEUpD,IEECqD,GADgB,EFDR,GAAG,KAAlB,CAD6B,CACJ,GEElBA,GADgB;ADG9B,CAPQ;ADID1D,AEEA+C,IFFA/C,IEEA+C,KFFS,CAACrD,CEEH,CAAC,CFFR,GAAgBO,KAAK,CAACK,SAAD,CAAL,CAAiB,CAAjB,CAAhB;AACAN,AECSyC,IFDTzC,MECSyC,GFDA,CAAC5C,GAAV,AECgB,EAAE,CFDFI,KAAK,CAACM,MECd,IFDa,CAAL,CAAkB,CAAlB,CAAhB;AACH,AEAoCoD,UAAAA,EAAE,EAAED;AFC5C,AEDe,CFfhB,QEee,CAAP;AAA2C,OAF7C,MAGK,IAAI,KAAKJ,MAAL,KAAgB,GAApB,EAAyB;AFEpC,AEFoC,IFE9B9C,UAAU,GAAG,SAAbA,CEDuB+C,IAAI,CAACC,IFCf,CEDU,CAAW,CFCf,IEDoBC,YAAhB,CADO;AFGhC,AEHgC,MFG1BhD,MEFK6B,GFEI,CEHiB,EFGd,SAAZ7B,KEFK6B,IFEO,AEHc,CFGb5B,KAAD,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","file":"book.b09756e5.js","sourceRoot":"..","sourcesContent":["const availableDates = () => {\r\n    const dateInput = document.querySelector('#date');\r\n    const minDate = new Date(Date.now() + 86400000);\r\n    const maxDate = new Date(Date.now() + 1296000000);\r\n    dateInput.min = minDate.toISOString().split('T')[0];\r\n    dateInput.max = maxDate.toISOString().split('T')[0];;\r\n}\r\n\r\nconst availableTimes = (event) => {\r\n    const timeInput = document.querySelector('#time');\r\n    const hours = {\r\n      \"Mon\": [\"17:00\", \"21:00\"],\r\n      \"Tues\": [\"17:00\", \"21:00\"],\r\n      \"Wed\": [\"17:00\", \"21:00\"],\r\n      \"Thurs\": [\"17:00\", \"21:00\"],\r\n      \"Fri\": [\"17:00\", \"21:00\"],\r\n      \"Sat\": [\"12:00\", \"21:00\"],\r\n      \"Sat\": [\"17:00\", \"20:00\"],\r\n    }\r\n    if (event.target.validity.valid) {\r\n        const dayOfWeek = \"Mon\"; // edit to this to get day of week\r\n        timeInput.min = hours[dayofWeek][0];\r\n        timeInput.max = hours[dayoffWeek][1];\r\n    }\r\n}\r\n\r\nconst selectBtns = () => {\r\n    const selectBtn = (input, value) => document.querySelector(input).value = value;\r\n    const restaurantBtns = document.querySelectorAll(\".restaurant .dropdownContent button\");\r\n    const partyBtns = document.querySelectorAll(\".party .dropdownContent button\");\r\n    const timeBtns = document.querySelectorAll(\".time .dropdownContent button\");\r\n    restaurantBtns.forEach(btn => btn.addEventListener('click', () => selectBtn(\"#restaurant\", btn.dataset.value)));\r\n    partyBtns.forEach(btn => btn.addEventListener('click', () => selectBtn(\"#party\", btn.dataset.value)));\r\n    timeBtns.forEach(btn => btn.addEventListener('click', () => selectBtn(\"#time\", btn.dataset.value)));\r\n  }\r\n\r\nexport const bookForm = () => {\r\n    availableDates();\r\n    //document.querySelector('#date').addEventListener('onchange', availableTimes(event)) ;\r\n    selectBtns();\r\n}","const inputs = document.querySelectorAll('input');\r\nconst errorBoxes = document.querySelectorAll('.error');\r\n\r\nexport const checkError = () => {\r\n    let error = false;\r\n    inputs.forEach( (input, index) => {\r\n      if (!input.validity.valid) {\r\n        error = true; \r\n        errorBoxes[index].classList.add('errorActive');\r\n        inputs[index].classList.add('inputInvalid');\r\n        inputs[index].scrollIntoView();\r\n        removeError(index);     \r\n      }\r\n    })\r\n    return error;\r\n}\r\n\r\n  export const removeError = (index) => {\r\n    inputs[index].oninput = () => {\r\n      if (inputs[index].validity.valid) {\r\n         inputs[index].classList.remove('inputInvalid');\r\n        errorBoxes[index].classList.remove('errorActive');\r\n      }\r\n    }\r\n}\r\n  \r\n  ","import { checkError } from './validation';\r\n\r\nconst setParams = () => {\r\n  const form = document.querySelector('#bookForm');\r\n  const name = form.elements[\"name\"].value;\r\n  const email = form.elements[\"email\"].value;\r\n  const restaurant = form.elements[\"restaurant\"].value;\r\n  const date = form.elements[\"date\"].value;\r\n  const time = form.elements[\"time\"].value;\r\n  const party = form.elements[\"party\"].value;\r\n  const message = form.elements[\"message\"].value;\r\n  return `name=${name}&email=${email}&restaurant=${restaurant}&date=${date}&time=${time}&party=${party}&message=${message}`\r\n}\r\n\r\nconst sendBooking = (method, url) => {\r\n  const params = setParams();\r\n  return new Promise ((resolve, reject) => {\r\n    const xhr = new XMLHttpRequest;\r\n    xhr.open(method, url, true);\r\n    xhr.setRequestHeader('content-type', 'application/x-www-form-urlencoded');\r\n    xhr.onload = function(){\r\n      if (this.status === 200) {\r\n        const {_id} = JSON.parse(this.responseText);\r\n        resolve({message: \"bookSuccess\", id: _id})}\r\n      else if (this.status === 403) {\r\n        const {date, time} = JSON.parse(this.responseText);\r\n        resolve({message: \"bookFull\", date, time})\r\n      }\r\n      else {reject({message: \"bookFail\"})}\r\n    };\r\n    xhr.onerror = function(){reject({message: \"bookFail\"})};\r\n    xhr.send(params);\r\n  })\r\n}\r\n\r\nexport const submitBooking = (method, url) => {\r\n  const bookBtn = document.querySelector('.bookBtn');\r\n  document.querySelector('#bookForm').addEventListener('submit', (e) => {  \r\n      e.preventDefault();\r\n      const error = checkError();\r\n      if (!error) {\r\n        bookBtn.value = \"Sending...\";\r\n        bookBtn.disabled = true;\r\n        sendBooking(method, url)\r\n          .then((reply) => {\r\n            let { message, id, date, time } = reply;\r\n            if (document.querySelector('#id')) id = document.querySelector('#id').value;\r\n            document.querySelector('#_id').innerHTML = `<a href=\"booking.html?${id}\">${id}</a>`\r\n            document.querySelector('#date').innerHTML = date\r\n            document.querySelector('#time').innerHTML = time\r\n            document.querySelector(`.${message}`).classList.add(\"modal-active\")\r\n          })\r\n          .catch(() => document.querySelector(\".bookFail\").classList.add(\"modal-active\"))\r\n      }\r\n  });\r\n}\r\n\r\n","import { bookForm } from './bookForm'\r\nimport { submitBooking } from './sendBooking';\r\n\r\n//preparing form and form Buttons\r\nbookForm();\r\n//send booking\r\ndocument.querySelector('#bookForm').addEventListener('submit', submitBooking('POST', './api/guest/booking'))\r\n\r\n\r\n"]}