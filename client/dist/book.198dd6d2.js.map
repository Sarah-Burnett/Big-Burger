{"version":3,"sources":["js/api.js","js/date.js","js/selectBtns.js","js/validation.js","js/book.js"],"names":["url","dateInput","document","querySelector","dateTodayplus1","Date","now","dateFortnightplus1","minmaxDate","min","toISOString","split","max","selectBtns","selectParty","increment","field","value","parseInt","decrement","onclick","selectTime","time","plus30","index","indexOf","length","minus30","selectRestaurant","rest","inc","dec","name","email","date","party","formBoxes","querySelectorAll","inputs","errorBoxes","checkError","forEach","div","classList","contains","remove","input","p","innerHTML","style","display","error","validity","valid","showError","getDate","getMonth","getFullYear","msg","errorMsg","add","scrollIntoView","console","log","submitForm","bookForm","bookBtn","postBooking","form","elements","restaurant","message","params","Promise","resolve","reject","xhr","XMLHttpRequest","open","setRequestHeader","onload","JSON","parse","responseText","_id","status","id","onerror","send","addEventListener","e","preventDefault","disabled","then","reply","catch"],"mappings":";;AIAA;;AACA;;AJDO,AIEP,AHFA,IDAaA,ACAPC,GDAU,GAAG,GCAJ,GAAGC,QAAQ,CAACC,MDApB,OCAW,CAAuB,OAAvB,CAAlB;AACO,ACDA,ACAP,IFCWC,ACDES,UAAU,GAAG,CDCD,GAAG,IAAIR,CCDnBQ,GDCe,CAASR,IAAI,CAACC,CCDhB,EDCW,CCDL,IDCkB,QAAtB,CAArB;AGEP,AFFI;ADCG,ACAP,ACAA,IFAWC,AEALyB,EDAAlB,ECAI,GAAGZ,MDAI,ECAI,CDAD,ACAEC,EFAO,GAAG,IAAIE,ACA9BS,IDA0B,AEAnB,CFA4BT,AEAL,IFAS,CAACC,CCA1B,CCAP,CFA4B,AEAzC,CDA0B,IDA4B,UAAtB,CAAzB;AGGPwD,AFFI,ACAJ,IAAM7B,GCEC,CAAC8B,AFFEhD,CCAC,ECEX,CAAYf,ADFEE,KDAK,GEEnB,AFFsB,ACAA,CAACC,ECIvB,WDJc,CAAuB,IDAda,ICAT,CDAQ,ACAtB,EDA8BD,UAAR,EAAmBH,GAAnB,EAA2B;AAAA,ACCjD,IAAMsB,IAAI,GAAGhC,QAAQ,CAACC,aAAT,CDAOD,ACAgB,OAAvB,CDAe,ACA5B,CDA6BC,aAAT,CAAuBa,KAAvB,CAD6B;AEKjD,AHJO,ACD0C,ACEjD,ICGMgD,AHJOxD,AECPc,IAAI,EDDCL,CCCEf,GCGG,AHJO,CCD0B,EEK9B,AHJO,EECL,CAACC,MCGhB6D,AHJOxD,OECA,CAAuB,ECGjB,AHJO,GGID,AHJO,CCArBS,CCCE,CAAb,GDFiD;AEM/C,AHJEhB,AECJ,EFDIA,EECEkC,ECGE8B,GDHG,EFDE,CAACxD,AECAP,ECGE,CHJZ,EGIeA,CHJCE,EECE,CAACD,ICGI,CAACA,MHJM,CAACO,CECrB,CAAuB,ICGlB,CAAuB,GDH5B,CFDM,AECpB,GFDiDC,IGI9B,CAAjB,AHJkB,CAAmC,GAAnC,EAAwC,CAAxC,CAAhB;AGKF,AHJEV,ACDE,ACEN,EFDIA,EECEmC,ECGE8B,IFLEjD,CDCG,CAACL,CGIC,ADHA,EFDX,ACDW,CEKGV,ADHAA,EFDEK,ACDFK,GAAZ,EAAiBV,CEKG,ADHA,CCGCC,ADHAkC,MDFI,CAAClC,IDCM,CAACO,CGIrB,CAAuB,EDHvB,CAA0B,GDFrB,CAAuBM,EDC1B,CGIF,CAAhB,CHJmDL,ACD9B,EAA8BM,GDCjC,CAAuC,AECzC,CDFK,ACEvB,EFDoB,CCDyCC,CDCG,CAA5C,CAAhB,KCDiE,CAACD,KAAD,CAAR,GAAkBF,UAAxD;ADC4C,ACA9D,ACEL,IAAMuB,CDLF,KCKQ,GAAGpC,QAAQ,CAACmC,gBAAT,CAA0B,OAA1B,CAAf;ACIE,AHLD,AEED,CFLO,GEKDE,ECGE4B,QDHQ,GCGG,ADHAjE,GCGG,KDHK,CAACmC,GCGpB8B,WAAc,CAACnE,CDHJ,CAA0B,CCGvB,EAAS,KDHZ,CAAnB;ACII,AFLA,QEKMoE,AFLAjD,IEKI,GAAGjB,EFLE,GAAG,GEKG,CAACC,aAAT,CAAuB,CFLjBa,KAAD,EAAQG,GEKb,CAAb,MFLkB,EAAmBV,GAAnB,EAA2B;AEM7C,AFN6C,ACG1C,IAAM+B,ICGHR,IAAI,EDHS,CCGNoC,EDHS,ECGL,CAACC,MDHT7B,ECGI,CAAc,MAAd,AFLGtC,CCEM,CCGae,EDHP,GCG5B,CFLwB,CAACd,aAAT,CAAuBa,KAAvB,CAD6B;AEO7C,AFP6C,ACI7CoB,EAAAA,MCGMH,EFNChB,CCGE,CAACwB,CCGC,EFPkC,CEO/B2B,GDHd,CCGkB,ADHC,CCGAC,QAAL,CAAc,ADHT3B,GAAG,EAAI,ECGZ,EAAuBzB,EFN9BA,GEMP,EFP6C;AEQ7C,ADHE,QCGIqD,ADHA5B,GAAG,CAACC,MCGM,GAAGyB,ADHb,CAAcxB,GCGG,CAACyB,IDHlB,CAAuB,GCGV,CAAc,KDH3B,CAAJ,EAAuC,ICGtB,EAA4BpD,KAA/C;AACA,AFPE,ACIEyB,MAAAA,ECGER,CDHC,CDJDjB,ACIE0B,ECGE,GAAGyB,AFPF,GAAG3D,CEOG,ADHb,CCGc4D,ADHAxB,CDJhB,EAAiB3C,GCIf,CAAqB,CCGZ,CAAc,EFPA,CAACC,GEOf,CDHT,CCG+Bc,KAAnC,GFPmB,CAAuBD,KAAvB,EAA8BC,KAA9B,GAAsCC,QAAQ,CAACD,KAAD,CAAR,GAAkBE,UAAxD;AEQnB,AFPC,ACIE,KDPH,GEUMG,IAAI,GAAG8C,IAAI,CAACC,QAAL,CAAc,MAAd,EAAsBpD,KAAnC;AACA,QAAMkB,KAAK,GAAGiC,IAAI,CAACC,QAAL,CAAc,OAAd,EAAuBpD,KAArC;AACA,AFPAf,ACEG,IDFHA,IEOMqE,IFPE,CAACpE,EEOI,GAAGiE,IAAI,CAACC,GFPrB,CAAuB,IEOP,CAAc,SAAd,AFPhB,EEOyCpD,AFPFG,KEOvC,EFPA,GAAiD;AEQjD,AFRiD,ACGhD,GAJD,KCSMoD,KFRiDzD,CEQ3C,QFRoD,CAAC,QAAD,EAAW,CAAX,EAAc,CAAd,CAAf,YEQRiB,IAA7B,oBAA2CC,KAA3C,yBAA+DqC,UAA/D,mBAAkFpC,IAAlF,mBAA+FZ,IAA/F,oBAA6Ga,KAA7G,sBAA8HoC,OAA9H,CAAZ;AACAT,AFTiD,ACIjDxB,EAAAA,ECKAwB,CFTA,GCIM,CAACrB,ECKA,CAACsB,GAAR,CAAYS,ADLZ,CAAgB,KCKhB,KDLgB1B,KAAK,EAAI;ACMzB,ADLI,QAAIA,GCKD,EDLM,CAACH,CCKH8B,OAAJ,CAAa,ADLZ,CAAgB7B,QAAhB,CCKa8B,ADLY,OCKb,EAAUC,ADLtB,CAAJ,EAAyC,GCKzB,EAAqB;AACvC,AFVFzE,ACKM4C,IDLN5C,ECKM4C,ICKE8B,CDLG,CDLH,ACKIjC,CCKD,AFVFxC,GEUK,IAAI0E,CDLZ,CAAgBhC,IDLtB,CAAuB,CCKjB,CAAuB,KCKf,EAAZ,EDLI,GDLN,EAAuCzB,OAAvC,GAAiD;AEW/CwD,AFX+C,ACM5C,MCKHA,GAAG,CAACE,GFXiD3D,CEWrD,CAAS,MAAT,CFX8D,CEW7CnB,AFX8C,GEW/D,EAAsB,GFXwC,CEW9D,CFXyE,CAAX,EAAc,CAAd,CAAf;AEY/C4E,AFZ+C,KAAjD,CEYEA,GAAG,CAACG,gBAAJ,CAAqB,cAArB,EAAqC,mCAArC;AFXH,ACKM,GDlBT,CAFgC,CAiB9B;AEUIH,ADNC,GAJH,GCUEA,GAAG,CAACI,MAAJ,GAAa,YAAU;AAAA,ADLzBzC,EAAAA,UAAU,CAACE,OAAX,CAAoB,KCMUwC,IAAI,CAACC,ADNfnC,CAAC,EAAI,ECMK,CAAW,KAAKoC,YAAhB,CADL;AAAA,AFT3B,ACKIpC,IAAAA,CAAC,CDLC1B,ACKA2B,MCKOoC,GADc,ADJvB,CDLY,ECKE,CDLC,CCKf,QDLE/D,EEUO+D,GADc,KFTR,GAAM;AESE,AFRzB,ACKErC,IAAAA,CAAC,CAACE,EDLE3B,GCKJ,CCIcY,AFTN,ACKAgB,GDLG,CEQY,AFRX,GCKZ,GAAkB,CDLP,EAAU,GCKrB,GCIchB,CFTH,EAAmB,CEQP,MFRZ,EAA4B,OAA5B,EAAqC,OAArC,EAA8C,OAA9C,EAAuD,OAAvD,EAAgE,OAAhE,EAAyE,OAAzE,CAAb;AEQyB,ADFxB,GAHD,SCMsBZ,IADG,eACHA,IADG;AFPzB,ACMA,MAAI6B,EDNE5B,GCMG,GDNG,ACMA,CAAZ,EDNe,SAATA,MAAS,GAAM;AESjB,AFRF,UAAMC,EEQA,GFRK,EEQA6D,CFRG/D,IAAI,CEQZ,AFRaG,KEQG,EFRR,CEQZ,AFRyBvB,EEQA,MFRQ,CAACC,aAAT,CAAuB,OAAvB,EAAgCc,KAA7C,CAAd;AESIyD,AFRJ,ACKF,MAAI,CAACvC,GCGCuC,AFRAlD,ECKI,CAAC4B,EDLA,EEQE,CAAC,AFRA9B,GCKT,CDLa,ACKE+B,CDLD3B,ICKnB,EDLc,ACKa,GDLD,CAAxB,EAA2BxB,QAAQ,CAACC,aAAT,CAAuB,OAAvB,EAAgCc,KAAhC,GAAwCK,IAAI,CAACE,KAAK,GAAG,CAAT,CAA5C;AEQd+C,AFPd,ACKCpB,IAAAA,CDRF,ICQO,GCEQoB,ADFL,CAAR,MCEoB,EAAE,aAAV;AAAyBe,ADDrChC,IAAAA,QCCqCgC,CDD5B,CCC8B,ADD7B,CAAD,CCCgCF,CDD5B,oCAAJ,CAAT;ACCY,AFNd,ACMC,QDNKzD,GEMO,CAAP,GFNO,GAAG,SAAVA,OAAU,GAAM;AEM2B,AFL/C,SEIE,CFJIH,KEMC,AFNI,GAAGF,CEMH,GFNO,CAACG,CEMH4D,MAAL,AFNG,CAAanF,IEMA,GAApB,CFN4B,CEMH,AFNIC,aAAT,CAAuB,OAAvB,EAAgCc,KAA7C,CAAd;AEOIyD,AFNJ,ACKF,MAAI,CAACpD,GCCCoD,AFNAlD,CCKG,CAAC4B,GDLC,EEME,CAAC,AFNA,CAAZ,CCKG,CD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","file":"book.198dd6d2.js","sourceRoot":"..","sourcesContent":["export const url = './api/guest/booking'","const dateInput = document.querySelector('#date');\r\nexport let dateTodayplus1 = new Date(Date.now() + 86400000);\r\nexport let dateFortnightplus1 = new Date(Date.now() + 1296000000);\r\n\r\nexport const minmaxDate = () => {\r\n    dateInput.min = dateTodayplus1.toISOString().split('T')[0];\r\n    dateInput.max = dateFortnightplus1.toISOString().split('T')[0];;\r\n};\r\n\r\n\r\n\r\n","export const selectBtns = () => {\r\n    // party buttons\r\nconst selectParty = () => {\r\n    const increment = (field, increment, max) => {\r\n      let {value} = document.querySelector(field);\r\n      if (value < max) document.querySelector(field).value = parseInt(value) + increment\r\n    }\r\n    \r\n    const decrement = (field, decrement, min) => {\r\n      let {value} = document.querySelector(field);\r\n      if (value > min) document.querySelector(field).value = parseInt(value) - decrement\r\n    }\r\n    \r\n    document.querySelector(\".incPartyBtn\").onclick = () => increment('#party', 1, 8)\r\n    document.querySelector(\".decPartyBtn\").onclick = () => decrement('#party', 1, 2)\r\n  }\r\n  \r\n  //time selection\r\n  const selectTime = () => {\r\n    const time = [\"17:00\", \"17:30\", \"18:00\", \"18:30\", \"19:00\", \"19:30\", \"20:00\", \"20:30\", \"21:00\"]\r\n    const plus30 = () => {\r\n      const index = time.indexOf(document.querySelector('#time').value)\r\n      if (index < time.length-1) document.querySelector('#time').value = time[index + 1]\r\n    }\r\n    const minus30 = () => {\r\n      const index = time.indexOf(document.querySelector('#time').value)\r\n      if (index > 0) document.querySelector('#time').value = time[index - 1]\r\n    }\r\n    document.querySelector(\".incTimeBtn\").onclick = plus30\r\n    document.querySelector(\".decTimeBtn\").onclick = minus30\r\n  }\r\n  \r\n  //restaurant selection\r\n  const selectRestaurant = () => {\r\n    const rest = [\"Glensgaich\", \"Tanygrisiau\"]\r\n    const inc = () => {\r\n      const index = rest.indexOf(document.querySelector('#restaurant').value)\r\n      if (index < rest.length-1) document.querySelector('#restaurant').value = rest[index + 1]\r\n    }\r\n    const dec = () => {\r\n      const index = rest.indexOf(document.querySelector('#restaurant').value)\r\n      if (index > 0) document.querySelector('#restaurant').value = rest[index - 1]\r\n    }\r\n    document.querySelector(\".incRestBtn\").onclick = inc\r\n    document.querySelector(\".decRestBtn\").onclick = dec\r\n  }\r\n\r\n  selectRestaurant()\r\n  selectTime()\r\n  selectParty()\r\n}","import { dateFortnightplus1, dateTodayplus1 } from './date';\r\n\r\nconst name = document.querySelector('#name');\r\nconst email = document.querySelector('#email');\r\nconst date = document.querySelector('#date');\r\nconst time = document.querySelector('#time');\r\nconst party = document.querySelector('#party');\r\nconst formBoxes = document.querySelectorAll('#bookForm div');\r\nconst inputs = document.querySelectorAll('input');\r\nconst errorBoxes = document.querySelectorAll('.error');\r\n\r\nexport const checkError = () => {\r\n    formBoxes.forEach( div => { \r\n      if (div.classList.contains('invalid')) {\r\n        div.classList.remove('invalid')\r\n      };\r\n    });\r\n    inputs.forEach( input => { \r\n        if (input.classList.contains('invalid')) {\r\n          input.classList.remove('invalid')\r\n        };\r\n      });\r\n    errorBoxes.forEach( p => {\r\n      p.innerHTML = '';\r\n      p.style.display = 'none';\r\n    });\r\n    let error = 0;\r\n    if (!party.validity.valid) {\r\n      error = 1;\r\n      showError(5, 'Please select the number of people');\r\n    }  \r\n    if (!time.validity.valid) {\r\n        error = 1;\r\n        showError(4, 'Please select the time you would like to book');\r\n      }\r\n    if (!date.validity.valid) {\r\n        error = 1;\r\n        showError(3, `Please input a date (dd/mm/yy) between ${dateTodayplus1.getDate()}/${dateTodayplus1.getMonth() + 1}/${dateTodayplus1.getFullYear()} and ${dateFortnightplus1.getDate()}/${dateFortnightplus1.getMonth() + 1}/${dateFortnightplus1.getFullYear()}`);\r\n      } \r\n    if (!email.validity.valid) {\r\n        error = 1;\r\n        showError(1, 'Please enter your valid email address');\r\n      } \r\n    if (!name.validity.valid) {\r\n        error = 1;\r\n        showError(0, 'Please enter your name');\r\n      }\r\n    return error;\r\n  }\r\n  \r\n  const showError = (index, msg) => {\r\n    let errorMsg = msg;\r\n    errorBoxes[index].innerHTML = errorMsg;\r\n    errorBoxes[index].style.display = 'block';\r\n    if (index == 0) {\r\n        document.querySelector('#name').classList.add('invalid');\r\n    }\r\n    if (index == 1) {\r\n        document.querySelector('#email').classList.add('invalid');\r\n    }\r\n    if (index == 3) {\r\n        document.querySelector('#date').classList.add('invalid');\r\n    }\r\n    formBoxes[index].scrollIntoView();\r\n  }\r\n  \r\n  ","import { url } from './api'\r\nimport { minmaxDate } from './date';\r\nimport { selectBtns } from './selectBtns'\r\nimport { checkError } from './validation';\r\n\r\nconsole.log(url);\r\n\r\n//form submit\r\nconst submitForm = () => {\r\n  const bookForm = document.querySelector('#bookForm');\r\n  const bookBtn = document.querySelector('#bookBtn');\r\n\r\n  const postBooking = (url) => {    \r\n    const form = document.querySelector('#bookForm');\r\n    const name = form.elements[\"name\"].value;\r\n    const email = form.elements[\"email\"].value;\r\n    const restaurant = form.elements[\"restaurant\"].value;\r\n    const date = form.elements[\"date\"].value;\r\n    const time = form.elements[\"time\"].value;\r\n    const party = form.elements[\"party\"].value;\r\n    const message = form.elements[\"message\"].value;\r\n    const params = `form-name=booking&name=${name}&email=${email}&restaurant=${restaurant}&date=${date}&time=${time}&party=${party}&message=${message}`;\r\n    console.log(params);\r\n    return new Promise ((resolve, reject) => {\r\n      const xhr = new XMLHttpRequest;\r\n      xhr.open('POST', url, true);\r\n      xhr.setRequestHeader('content-type', 'application/x-www-form-urlencoded');\r\n      xhr.onload = function(){\r\n        const {_id, date, time} = JSON.parse(this.responseText);\r\n        if (this.status === 200) {\r\n          resolve({message: \"bookSuccess\", id: _id})}\r\n        else if (this.status === 403) {\r\n          resolve({message: \"bookFull\", date, time})\r\n        }\r\n        else {reject({message: \"bookFail\"})}\r\n      };\r\n      xhr.onerror = function(){reject({message: \"bookFail\"})};\r\n      xhr.send(params);\r\n    })\r\n};\r\n\r\n  bookForm.addEventListener('submit', (e) => {  \r\n      e.preventDefault();\r\n      const error = checkError();\r\n      if (error === 0) {\r\n        bookBtn.value = \"Sending...\";\r\n        bookBtn.disabled = true;\r\n        postBooking(url)\r\n          .then((reply) => {\r\n            const { message, id, date, time } = reply\r\n            document.querySelector('#id').innerHTML = `<a href=\"booking.html?${id}\">${id}</a>`\r\n            document.querySelector('#date').innerHTML = date\r\n            document.querySelector('#time').innerHTML = time\r\n            document.querySelector(`.${message}`).classList.add(\"modalActive\")\r\n          })\r\n          .catch(() => document.querySelector(\".bookFail\").classList.add(\"modalActive\"))\r\n        }\r\n  });\r\n}\r\n  \r\n//call functions\r\nminmaxDate()\r\nselectBtns()\r\nsubmitForm()\r\n\r\n\r\n"]}