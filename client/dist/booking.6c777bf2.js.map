{"version":3,"sources":["js/booking.js"],"names":["findBtn","document","querySelector","editBtn","updateBtn","deleteBtn","getBooking","id","Promise","resolve","reject","xhr","XMLHttpRequest","open","onload","status","responseText","error","send","findBooking","event","preventDefault","value","then","response","inputForm","catch","console","log","booking","JSON","parse","inputs","querySelectorAll","forEach","input","name","classList","remove","editForm","readOnly","cancelBtn","style","display","updateBooking","_id","email","restaurant","date","time","party","message","onerror","params","deleteBooking","submitForm","location","search","substr","onclick"],"mappings":"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","file":"booking.6c777bf2.js","sourceRoot":"..","sourcesContent":["const findBtn = document.querySelector('#findBtn')\r\nconst editBtn = document.querySelector('#editBtn')\r\nconst updateBtn = document.querySelector('#updateBtn')\r\nconst deleteBtn = document.querySelector('#deleteBtn')\r\n\r\nconst getBooking = (id) => {\r\n  return new Promise ((resolve, reject) => {\r\n    const xhr = new XMLHttpRequest\r\n    xhr.open('GET', `/api/bookings/${id}`, true)\r\n    xhr.onload = function(){\r\n      if (this.status === 200) resolve(this.responseText)\r\n      else reject({error: \"no booking found\"})\r\n    }\r\n    xhr.send()\r\n  })\r\n}\r\n\r\nconst findBooking = (event) => {\r\n  event.preventDefault()\r\n  getBooking(document.querySelector('#id').value)\r\n  .then((response) => inputForm(response))\r\n  .catch((error) => console.log(error))\r\n}\r\n\r\nconst inputForm = (booking) => {\r\n  booking = JSON.parse(booking)\r\n  const inputs = document.querySelectorAll('input')\r\n  inputs.forEach(input => {if (input.name !== \"id\") input.value = booking[input.name]})\r\n  document.querySelector('.modalBg').classList.remove(\"modalActive\")\r\n}\r\n\r\nconst editForm = (event) => {\r\n  const inputs = document.querySelectorAll('input')\r\n  event.preventDefault()\r\n  inputs.forEach(input => input.readOnly = false)\r\n  cancelBtn.style.display = \"block\"\r\n  updateBtn.style.display = \"block\"\r\n  editBtn.style.display = \"none\"\r\n  deleteBtn.style.display = \"none\"\r\n}\r\n\r\nconst updateBooking = () => {\r\n    return new Promise ((resolve, reject) => {\r\n        const xhr = new XMLHttpRequest;\r\n        xhr.open('POST', '/api/bookings', true);\r\n        xhr.onload = function(){\r\n          const {_id, name, email, restaurant, date, time, party, message} = JSON.parse(this.responseText);\r\n          if (this.status === 200) {\r\n            resolve({message: \"bookSuccess\", id:_id})}\r\n          else {reject({message: \"bookFail\"})}\r\n        };\r\n        xhr.onerror = function(){reject(\"Booking error. <br> Please try again or give us a call\")};\r\n        xhr.send(params);\r\n      })\r\n    }\r\n\r\nconst deleteBooking = (event) => {\r\n  console.log(\"delete me bro\")\r\n  event.preventDefault()\r\n  const xhr = new XMLHttpRequest\r\n  xhr.open('DELETE', `/api/bookings/${id}`, true) \r\n  xhr.onload = function(){\r\n    console.log(this.responseText);\r\n  }\r\n  xhr.send()\r\n}\r\n\r\nconst submitForm = (event) => {\r\n  event.preventDefault();\r\n  updateBooking()\r\n}\r\n\r\nconst id = location.search.substr(1)\r\nif (id !== \"\") {\r\n  document.querySelector('#id').value = id\r\n  getBooking(id)\r\n    .then((response) => inputForm(response))\r\n    .catch((error) => console.log(error))\r\n}\r\n\r\nfindBtn.onclick = (event) => findBooking(event)\r\neditBtn.onclick = (event) => editForm(event);\r\ndeleteBtn.onclick = (event) => deleteBooking(event);\r\n//updateBtn.onclick = (event) => submitForm(event);\r\n\r\n\r\n//document.querySelector('form').onsubmit = checkError;"]}